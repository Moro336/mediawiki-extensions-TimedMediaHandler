
var OGVDecoderVideoTheoraW = (function() {
  var _scriptDir = typeof document !== 'undefined' && document.currentScript ? document.currentScript.src : undefined;
  return (
function(OGVDecoderVideoTheoraW) {
  OGVDecoderVideoTheoraW = OGVDecoderVideoTheoraW || {};

var a;a||(a=typeof OGVDecoderVideoTheoraW !== 'undefined' ? OGVDecoderVideoTheoraW : {});var h=a;a.memoryLimit&&(a.TOTAL_MEMORY=h.memoryLimit);var p={},q;for(q in a)a.hasOwnProperty(q)&&(p[q]=a[q]);a.arguments=[];a.thisProgram="./this.program";a.quit=function(b,c){throw c;};a.preRun=[];a.postRun=[];var u=!1,v=!1,x=!1,aa=!1;u="object"===typeof window;v="function"===typeof importScripts;x="object"===typeof process&&"function"===typeof require&&!u&&!v;aa=!u&&!x&&!v;var y="";
function z(b){return a.locateFile?a.locateFile(b,y):y+b}
if(x){y=__dirname+"/";var A,B;a.read=function(b,c){A||(A=require("fs"));B||(B=require("path"));b=B.normalize(b);b=A.readFileSync(b);return c?b:b.toString()};a.readBinary=function(b){b=a.read(b,!0);b.buffer||(b=new Uint8Array(b));assert(b.buffer);return b};1<process.argv.length&&(a.thisProgram=process.argv[1].replace(/\\/g,"/"));a.arguments=process.argv.slice(2);process.on("unhandledRejection",function(){process.exit(1)});a.quit=function(b){process.exit(b)};a.inspect=function(){return"[Emscripten Module object]"}}else if(aa)"undefined"!=
typeof read&&(a.read=function(b){return read(b)}),a.readBinary=function(b){if("function"===typeof readbuffer)return new Uint8Array(readbuffer(b));b=read(b,"binary");assert("object"===typeof b);return b},"undefined"!=typeof scriptArgs?a.arguments=scriptArgs:"undefined"!=typeof arguments&&(a.arguments=arguments),"function"===typeof quit&&(a.quit=function(b){quit(b)});else if(u||v)u?document.currentScript&&(y=document.currentScript.src):y=self.location.href,_scriptDir&&(y=_scriptDir),y=0!==y.indexOf("blob:")?
y.split("/").slice(0,-1).join("/")+"/":"",a.read=function(b){var c=new XMLHttpRequest;c.open("GET",b,!1);c.send(null);return c.responseText},v&&(a.readBinary=function(b){var c=new XMLHttpRequest;c.open("GET",b,!1);c.responseType="arraybuffer";c.send(null);return new Uint8Array(c.response)}),a.readAsync=function(b,c,d){var e=new XMLHttpRequest;e.open("GET",b,!0);e.responseType="arraybuffer";e.onload=function(){200==e.status||0==e.status&&e.response?c(e.response):d()};e.onerror=d;e.send(null)},a.setWindowTitle=
function(b){document.title=b};var ba=a.print||("undefined"!==typeof console?console.log.bind(console):"undefined"!==typeof print?print:null),D=a.printErr||("undefined"!==typeof printErr?printErr:"undefined"!==typeof console&&console.warn.bind(console)||ba);for(q in p)p.hasOwnProperty(q)&&(a[q]=p[q]);p=void 0;function ia(b){var c;c||(c=16);return Math.ceil(b/c)*c}var ja={"f64-rem":function(b,c){return b%c},"debugger":function(){debugger}},ka=0;function assert(b,c){b||E("Assertion failed: "+c)}
"undefined"!==typeof TextDecoder&&new TextDecoder("utf8");"undefined"!==typeof TextDecoder&&new TextDecoder("utf-16le");function F(b,c){0<b%c&&(b+=c-b%c);return b}var buffer,la,H,I;function J(){a.HEAP8=la=new Int8Array(buffer);a.HEAP16=new Int16Array(buffer);a.HEAP32=I=new Int32Array(buffer);a.HEAPU8=H=new Uint8Array(buffer);a.HEAPU16=new Uint16Array(buffer);a.HEAPU32=new Uint32Array(buffer);a.HEAPF32=new Float32Array(buffer);a.HEAPF64=new Float64Array(buffer)}var K,N,O,P,Q,R,S;K=N=O=P=Q=R=S=0;
a.reallocBuffer||(a.reallocBuffer=function(b){try{if(ArrayBuffer.g)var c=ArrayBuffer.g(buffer,b);else{var d=la;c=new ArrayBuffer(b);(new Int8Array(c)).set(d)}}catch(e){return!1}return ma(c)?c:!1});var T;try{T=Function.prototype.call.bind(Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get),T(new ArrayBuffer(4))}catch(b){T=function(c){return c.byteLength}}var na=a.TOTAL_STACK||5242880,U=a.TOTAL_MEMORY||16777216;
U<na&&D("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+U+"! (TOTAL_STACK="+na+")");a.buffer?buffer=a.buffer:("object"===typeof WebAssembly&&"function"===typeof WebAssembly.Memory?(a.wasmMemory=new WebAssembly.Memory({initial:U/65536}),buffer=a.wasmMemory.buffer):buffer=new ArrayBuffer(U),a.buffer=buffer);J();
function V(b){for(;0<b.length;){var c=b.shift();if("function"==typeof c)c();else{var d=c.h;"number"===typeof d?void 0===c.a?a.dynCall_v(d):a.dynCall_vi(d,c.a):d(void 0===c.a?null:c.a)}}}var oa=[],pa=[],qa=[],ra=[],sa=!1;function ta(){var b=a.preRun.shift();oa.unshift(b)}var W=0,ua=null,X=null;a.preloadedImages={};a.preloadedAudios={};function Y(b){return String.prototype.startsWith?b.startsWith("data:application/octet-stream;base64,"):0===b.indexOf("data:application/octet-stream;base64,")}
(function(){function b(){try{if(a.wasmBinary)return new Uint8Array(a.wasmBinary);if(a.readBinary)return a.readBinary(g);throw"both async and sync fetching of the wasm failed";}catch(w){E(w)}}function c(){return a.wasmBinary||!u&&!v||"function"!==typeof fetch?new Promise(function(c){c(b())}):fetch(g,{credentials:"same-origin"}).then(function(b){if(!b.ok)throw"failed to load wasm binary file at '"+g+"'";return b.arrayBuffer()}).catch(function(){return b()})}function d(b){function d(b){m=b.exports;if(m.memory){b=
m.memory;var c=a.buffer;b.byteLength<c.byteLength&&D("the new buffer in mergeMemory is smaller than the previous one. in native wasm, we should grow memory here");c=new Int8Array(c);(new Int8Array(b)).set(c);a.buffer=buffer=b;J()}a.asm=m;a.usingWasm=!0;W--;a.monitorRunDependencies&&a.monitorRunDependencies(W);0==W&&(null!==ua&&(clearInterval(ua),ua=null),X&&(b=X,X=null,b()))}function e(b){d(b.instance)}function f(b){c().then(function(b){return WebAssembly.instantiate(b,k)}).then(b).catch(function(b){D("failed to asynchronously prepare wasm: "+
b);E(b)})}if("object"!==typeof WebAssembly)return D("no native wasm support detected"),!1;if(!(a.wasmMemory instanceof WebAssembly.Memory))return D("no native wasm Memory in use"),!1;b.memory=a.wasmMemory;k.global={NaN:NaN,Infinity:Infinity};k["global.Math"]=Math;k.env=b;W++;a.monitorRunDependencies&&a.monitorRunDependencies(W);if(a.instantiateWasm)try{return a.instantiateWasm(k,d)}catch(L){return D("Module.instantiateWasm callback failed with error: "+L),!1}a.wasmBinary||"function"!==typeof WebAssembly.instantiateStreaming||
Y(g)||"function"!==typeof fetch?f(e):WebAssembly.instantiateStreaming(fetch(g,{credentials:"same-origin"}),k).then(e).catch(function(b){D("wasm streaming compile failed: "+b);D("falling back to ArrayBuffer instantiation");f(e)});return{}}var e="ogv-decoder-video-theora-wasm.wast",g="ogv-decoder-video-theora-wasm.wasm",n="ogv-decoder-video-theora-wasm.temp.asm.js";Y(e)||(e=z(e));Y(g)||(g=z(g));Y(n)||(n=z(n));var k={global:null,env:null,asm2wasm:ja,parent:a},m=null;a.asmPreload=a.asm;var r=a.reallocBuffer;
a.reallocBuffer=function(b){if("asmjs"===f)var c=r(b);else a:{b=F(b,a.usingWasm?65536:16777216);var d=a.buffer.byteLength;if(a.usingWasm)try{c=-1!==a.wasmMemory.grow((b-d)/65536)?a.buffer=a.wasmMemory.buffer:null;break a}catch(ea){c=null;break a}c=void 0}return c};var f="";a.asm=function(b,c){if(!c.table){b=a.wasmTableSize;void 0===b&&(b=1024);var e=a.wasmMaxTableSize;c.table="object"===typeof WebAssembly&&"function"===typeof WebAssembly.Table?void 0!==e?new WebAssembly.Table({initial:b,maximum:e,
element:"anyfunc"}):new WebAssembly.Table({initial:b,element:"anyfunc"}):Array(b);a.wasmTable=c.table}c.memoryBase||(c.memoryBase=a.STATIC_BASE);c.tableBase||(c.tableBase=0);c=d(c);assert(c,"no binaryen method succeeded.");return c}})();K=1024;N=K+3392;pa.push();a.STATIC_BASE=K;a.STATIC_BUMP=3392;var xa=N+=16;N=N+4+15&-16;S=xa;O=P=ia(N);Q=O+na;R=ia(Q);I[S>>2]=R;a.wasmTableSize=16;a.wasmMaxTableSize=16;a.b={};
a.c={abort:E,enlargeMemory:function(){var b=a.usingWasm?65536:16777216,c=2147483648-b;if(I[S>>2]>c)return!1;var d=U;for(U=Math.max(U,16777216);U<I[S>>2];)536870912>=U?U=F(2*U,b):U=Math.min(F((3*U+2147483648)/4,b),c);b=a.reallocBuffer(U);if(!b||b.byteLength!=U)return U=d,!1;a.buffer=buffer=b;J();return!0},getTotalMemory:function(){return U},abortOnCannotGrowMemory:function(){E("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+U+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")},
___setErrNo:function(b){a.___errno_location&&(I[a.___errno_location()>>2]=b);return b},_emscripten_memcpy_big:function(b,c,d){H.set(H.subarray(c,c+d),b);return b},_ogvjs_callback_frame:function(b,c,d,e,g,n,k,m,r,f,w,ca,da,ea,L,va){var fa=a.HEAPU8,C=w+7&-8,M=ca+7&-8,t=C*r/k,G=M*f/m,wa=da&-2,ha=ea&-2;k=wa*r/k;r=ha*f/m;m=new Uint8Array(C*M);for(f=0;f<M;f++){var l=b+(f+ha)*c+da;l=fa.subarray(l,l+C);m.set(l,C*f)}b=new Uint8Array(t*G);for(f=0;f<G;f++)l=d+(f+r)*e+k,l=fa.subarray(l,l+t),b.set(l,t*f);d=new Uint8Array(t*
G);for(f=0;f<G;f++)l=g+(f+r)*n+k,l=fa.subarray(l,l+t),d.set(l,t*f);g=a.videoFormat;w===g.cropWidth&&ca===g.cropHeight&&(L=g.displayWidth,va=g.displayHeight);a.frameBuffer={format:{width:C,height:M,chromaWidth:t,chromaHeight:G,cropLeft:da-wa,cropTop:ea-ha,cropWidth:w,cropHeight:ca,displayWidth:L,displayHeight:va},y:{bytes:m,stride:C},u:{bytes:b,stride:t},v:{bytes:d,stride:t}}},_ogvjs_callback_init_video:function(b,c,d,e,g,n,k,m,r,f,w){a.videoFormat={width:b,height:c,chromaWidth:d,chromaHeight:e,cropLeft:m,
cropTop:r,cropWidth:n,cropHeight:k,displayWidth:f,displayHeight:w,fps:g};a.loadedMetadata=!0},DYNAMICTOP_PTR:S,STACKTOP:P};var ya=a.asm(a.b,a.c,buffer);a.asm=ya;var ma=a._emscripten_replace_memory=function(){return a.asm._emscripten_replace_memory.apply(null,arguments)};a._free=function(){return a.asm._free.apply(null,arguments)};a._malloc=function(){return a.asm._malloc.apply(null,arguments)};a._ogv_video_decoder_async=function(){return a.asm._ogv_video_decoder_async.apply(null,arguments)};
a._ogv_video_decoder_destroy=function(){return a.asm._ogv_video_decoder_destroy.apply(null,arguments)};a._ogv_video_decoder_init=function(){return a.asm._ogv_video_decoder_init.apply(null,arguments)};a._ogv_video_decoder_process_frame=function(){return a.asm._ogv_video_decoder_process_frame.apply(null,arguments)};a._ogv_video_decoder_process_header=function(){return a.asm._ogv_video_decoder_process_header.apply(null,arguments)};a.asm=ya;
a.then=function(b){if(a.calledRun)b(a);else{var c=a.onRuntimeInitialized;a.onRuntimeInitialized=function(){c&&c();b(a)}}return a};X=function za(){a.calledRun||Aa();a.calledRun||(X=za)};
function Aa(){function b(){if(!a.calledRun&&(a.calledRun=!0,!ka)){sa||(sa=!0,V(pa));V(qa);if(a.onRuntimeInitialized)a.onRuntimeInitialized();if(a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;){var b=a.postRun.shift();ra.unshift(b)}V(ra)}}if(!(0<W)){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)ta();V(oa);0<W||a.calledRun||(a.setStatus?(a.setStatus("Running..."),setTimeout(function(){setTimeout(function(){a.setStatus("")},
1);b()},1)):b())}}a.run=Aa;function E(b){if(a.onAbort)a.onAbort(b);void 0!==b?(ba(b),D(b),b=JSON.stringify(b)):b="";ka=!0;throw"abort("+b+"). Build with -s ASSERTIONS=1 for more info.";}a.abort=E;if(a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);0<a.preInit.length;)a.preInit.pop()();a.noExitRuntime=!0;Aa();var Z,Ba,Ca;Ca="undefined"===typeof performance||"undefined"===typeof performance.now?Date.now:performance.now.bind(performance);
function Da(b){var c=Ca();b=b();a.cpuTime+=Ca()-c;return b}a.loadedMetadata=!!h.videoFormat;a.videoFormat=h.videoFormat||null;a.frameBuffer=null;a.cpuTime=0;Object.defineProperty(a,"processing",{get:function(){return!1}});a.init=function(b){Da(function(){a._ogv_video_decoder_init()});b()};a.processHeader=function(b,c){var d=Da(function(){var c=b.byteLength;Z&&Ba>=c||(Z&&a._free(Z),Ba=c,Z=a._malloc(Ba));var d=Z;a.HEAPU8.set(new Uint8Array(b),d);return a._ogv_video_decoder_process_header(d,c)});c(d)};
a.f=[];a.processFrame=function(b,c){function d(b){a._free(n);c(b)}var e=a._ogv_video_decoder_async(),g=b.byteLength,n=a._malloc(g);e&&a.f.push(d);var k=Da(function(){a.HEAPU8.set(new Uint8Array(b),n);return a._ogv_video_decoder_process_frame(n,g)});e||d(k)};a.close=function(){};


  return OGVDecoderVideoTheoraW;
}
);
})();
if (typeof exports === 'object' && typeof module === 'object')
    module.exports = OGVDecoderVideoTheoraW;
  else if (typeof define === 'function' && define['amd'])
    define([], function() { return OGVDecoderVideoTheoraW; });
  else if (typeof exports === 'object')
    exports["OGVDecoderVideoTheoraW"] = OGVDecoderVideoTheoraW;
  